{"./":{"url":"./","title":"版本","keywords":"","body":"V2.2.1 文档版本 系统版本 说明 V2.2.1 V2R2C01 开发版本 1 优势和特点 2 性能参数 3 三种应用场景 "},"zh/V2R2C01_README.html":{"url":"zh/V2R2C01_README.html","title":"V2.2.1","keywords":"","body":"V2.2.1 SE3 AI迷你机说明书 系统配置指南 系统对接 "},"zh/V2R2C01/api-lie-biao/SE3-AI-Mini-ji-shuo-ming-shu/":{"url":"zh/V2R2C01/api-lie-biao/SE3-AI-Mini-ji-shuo-ming-shu/","title":"1. SE3 AI迷你机说明书","keywords":"","body":"SE3 AI迷你机说明书 "},"zh/V2R2C01/api-lie-biao/xi-tong-pei-zhi-zhi-nang/":{"url":"zh/V2R2C01/api-lie-biao/xi-tong-pei-zhi-zhi-nang/","title":"2. 采集设备配置指南","keywords":"","body":"采集设备配置指南 网络摄像机模式 闸机模式 抓拍机模式 "},"zh/V2R2C01/api-lie-biao/xi-tong-pei-zhi-zhi-nang/wang-luo-she-xiang-ji-mo-shi/":{"url":"zh/V2R2C01/api-lie-biao/xi-tong-pei-zhi-zhi-nang/wang-luo-she-xiang-ji-mo-shi/","title":"2.1 网络摄像机模式","keywords":"","body":"网络摄像机模式 一、系统网络图 参考下图，将各个设备加入同一局域网络内。 二、设置网络摄像机 首先设置网络摄像机，确保摄像机可以输出正确的网络视频流。 不同的网络摄像机配置界面各不相同，请查看对应的产品说明书进行配置。以下以大华网络摄像机(IPC-HFW4243K-ZFD-LED)举例说明。 使用Chrome浏览器，输入网络摄像机的IP地址进入IPC设置视频界面。帧率和分辨率推荐使用1080P/15fps（此为SE3支持的最高视频格式，超出这个设置会导致系统无法接收网络摄像机视频输入），在网络带宽允许的情况下，码率尽可能设置为最大值，以增加图像的清晰度，获得最佳识别效果。 验证网络摄像机的视频流输出 市面上网络摄像机的RTSP视频流输出地址不尽相同，请以官方网站说明或产品说明书为主。但通常来讲，一般格式如下： rtsp://用户名:密码@ip。为了确保我们设置到SE3 AI迷你机的地址是正确的，可以在电脑上安装 VLC播放器，用它来打开对应的网络视频流地址，如果VLC能正常播放并看到现场图像，则说明我们设置的地址是正确的。 VLC正确的播放画面参考如下： 三、设置SE3 AI迷你机 使用Chrome浏览器，打开SE3 web界面: https://se3-ip:8886/，然后输入用户名和密码（默认均为admin） 选择 camera type 为 \"Video Camera(Stream)\" 增加相应的用户组 增加完成后如下图所示。可以点 “Add”继续增加其它用户组。 为用户组增加相应的用户 增加完毕后，用户列表显示如下： 增加网络摄像机 在config→Video Camera(Stream)下面，点击add，增加设备。 参照下图填写好对应的网络摄像机配置信息，填入RTSP码流地址，选择需要绑定的用户组，并命名。 可以按照上述步骤，依次添加其余的网络摄像机。每台 SE3 AI迷你机最多同时添加4台网络摄像机。 四、查看人脸识别结果 在完成上述配置后，接下来可以开始人脸识别。 请已经添加用户的人员站在网络摄像机的前方合适位置，查看是否能正常识别。 去历史事件记录页面查看识别记录，可以看到已经可以正常识别出注册用户，说明人脸识别系统设置成功。 "},"zh/V2R2C01/api-lie-biao/xi-tong-pei-zhi-zhi-nang/zha-ji-mo-shi/":{"url":"zh/V2R2C01/api-lie-biao/xi-tong-pei-zhi-zhi-nang/zha-ji-mo-shi/","title":"2.2 闸机模式","keywords":"","body":"闸机模式 一、系统网络图 参考下图，将各个设备加入同一局域网络内。 二、闸机和门禁机设置 查看闸机或门禁机的IP地址，后面配置中会用到。 在阃或门禁机设备屏幕上单击，右上角会出现“设置”图标，进入到设置页面。然后在“关于”页面查看IP地址，记在本子上。 三、SE3 AI迷你机设置 使用Chrome浏览器，打开SE3 web界面: https://se3-ip:8886/，然后输入用户名和密码（默认均为admin）。 设置工作模式为“单机模式” 设置设备类型为“闸机模式” 添加对应权限组 增加完成后如下图所示。可以点 “Add”继续增加其它权限组。 为权限组增加相应的用户 增加完毕后，用户列表显示如下： 添加闸机 务必选择正确的闸机门禁的型号，否则闸机门禁设备的无法正常显示。 通常网络环境下，所有连接到局域网中的闸机门禁设备会自动出现在列表中，按需要勾选并添加即可。但如果闸机门禁设备与SE3不在同一个网段内，则不会自动出现在设备列表中，这时你需要选择手工添加按钮进行手工添加。 选择 Details 编辑设备信息 确认闸机或门禁机接收到配置 在阃或门禁机设备屏幕上单击，右上角会出现“设置”图标，进入到设置页面。选择“基本配置”，确认2，3，4项的内容是否正确。 四、系统功能验证 进行人脸识别验证 请已经注册的人员站在闸机或门禁机前面适合位置上（设备正前方约1米左右），确认系统可以识别出正确的用户并且将注册照片回显在屏幕上。 查看识别历史记录 正常情况下，这时可以在识别历史记录页查查看到刚才识别成功的事件。 "},"zh/V2R2C01/api-lie-biao/xi-tong-pei-zhi-zhi-nang/zhua-pai-ji-mo-shi/":{"url":"zh/V2R2C01/api-lie-biao/xi-tong-pei-zhi-zhi-nang/zhua-pai-ji-mo-shi/","title":"2.3 抓拍机模式","keywords":"","body":"抓拍机模式 一、系统网络图 参考下图，将各个设备加入同一局域网络内。 二、设置抓拍机设备 使用Chrome浏览器，登陆到抓拍机Web页面。 不同的抓拍机登陆界面不尽相同，本文中以大华抓拍机(IPC-HFW4243K-ZFD-LED)举例说明。 进入存储管理，打开存储，配置左右两个ftp如图所示。 设置FTP存储地址到SE3 确认打开智能方案中的人脸检测。 确认启用人脸检测和人脸抓图。 选择要修改的用户名。 点击修改密码, 设置pyonvif得用户名和密码为：admin 和 bitmain2018。 重启抓拍机。 三、SE3 AI迷你机设置 使用Chrome浏览器，打开SE3 web界面: https://se3-ip:8886/，然后输入用户名和密码（默认均为admin）。 设置工作模式为“本地模式” 人脸识别系统抓拍机模式快速配置指南 > image2019-2-28_19-30-18.png\"> 设置摄像机类型为“抓拍模式” 人脸识别系统抓拍机模式快速配置指南 > image2019-2-28_20-37-45.png\"> 添加对应用用户组 增加完成后如下图所示。可以点 “Add”继续增加其它用户组。 人脸识别系统抓拍机模式快速配置指南 > image2019-2-28_16-17-32.png\"> 人脸识别系统抓拍机模式快速配置指南 > image2019-2-28_16-11-21.png\"> 为用户组增加相应的用户 人脸识别系统抓拍机模式快速配置指南 > image2019-2-28_16-12-24.png\"> 人脸识别系统抓拍机模式快速配置指南 > image2019-2-28_16-23-3.png\"> 增加完毕后，用户列表显示如下： 人脸识别系统抓拍机模式快速配置指南 > image2019-2-28_16-26-35.png\"> 添加抓拍机 人脸识别系统抓拍机模式快速配置指南 > image2019-2-28_20-40-7.png\"> 通常网络环境下，所有连接到局域网中的抓拍机设备会自动出现在列表中，请按需要勾选并添加。但如抓拍机没有自动出现在设备列表中，这时你也可以选择手工添加的方式添加设备。 人脸识别系统抓拍机模式快速配置指南 > image2019-2-28_20-43-36.png\"> 选择 Details 编辑设备信息 人脸识别系统抓拍机模式快速配置指南 > image2019-2-28_20-46-32.png\"> 人脸识别系统抓拍机模式快速配置指南 > image2019-2-28_20-47-43.png\"> 四、系统功能验证 人脸识别验证 请系统中已经注册的人员站在抓拍机的合适位置（抓拍机焦距不同，对应的可识别位置范围也不同，以实际为主）。再到事件历史记录页面查看历史记录，正常情况下，可以看到识别成功的事件。 人脸识别系统抓拍机模式快速配置指南 > image2019-2-28_21-11-2.png\"> "},"zh/V2R2C01/api-lie-biao/xi-tong-dui-jie-shuo-ming-shu/":{"url":"zh/V2R2C01/api-lie-biao/xi-tong-dui-jie-shuo-ming-shu/","title":"3. 系统对接","keywords":"","body":"灵活方便的系统对接 整个系统框架如下： 图中，被红色虚线框定的是已经完成的样本系统，提供SE3 AI迷你机管理，采集设备管理等。 客户在系统对接的过程中，可以对接现有的管理平台 或是自建管理平台 对接现有的管理平台 只需要对接人员信息即可 支持一个或多个SE3 AI迷你机场景 简单，便捷，开发周期短 自建管理平台 需要遵循《SE3迷你机管理协议》 支持一个或多个SE3 AI迷你机场景 灵活，可自定义产品 "},"zh/V2R2C01/api-lie-biao/xi-tong-dui-jie-shuo-ming-shu/dui-jie-guan-li-ping-tai/":{"url":"zh/V2R2C01/api-lie-biao/xi-tong-dui-jie-shuo-ming-shu/dui-jie-guan-li-ping-tai/","title":"3.1 对接管理平台","keywords":"","body":"对接管理平台 "},"zh/V2R2C01/api-lie-biao/xi-tong-dui-jie-shuo-ming-shu/dui-jie-SE3-he-zi/":{"url":"zh/V2R2C01/api-lie-biao/xi-tong-dui-jie-shuo-ming-shu/dui-jie-SE3-he-zi/","title":"3.2 自建管理平台","keywords":"","body":"SE3迷你机管理协议说明 ​ 本协议主要规范负责管理平台和SE3 AI迷你机之间的数据交互，包括连接管理，用户管理，事件管理和设备状态上报等。 其作用域如下图所示： 连接管理 用于实现用于平台和SE3 AI 迷你机端之间的连接控制，包括MQ参数的获取，MQ channel建立等。 相关文档 说明 建立连接流程 介绍SE3 AI迷你机如何登录到管理平台 接口登录 规定SE3 AI迷你机登录请求参数，及管理平台返回参数 用户管理 用于处理消息中下放的人员ID，并基于人员ID获取到人员的详细信息，并将人员入库等。 相关文档 说明 用户管理流程 介绍SE3 AI迷你机和管理平台之间用户信息同步流程 添加或更新用户 管理平台向 SE3 AI 迷你机下发用户列表和用户详细信息。本协议支持如下两种的数据同步方式： 消息中携带用户信息 独立接口获取用户详细信息 删除用户 管理平台告知SE3 AI迷你机删除一个或多个用户信息 人脸图像检测 管理平台请求SE3 AI迷你机对人脸图像做质量检测 事件管理 相关文档 说明 事件上报 规定了SE3 AI迷你机向管理平台上报事件的过程及数据格式。内容包括：实时事件和历史事件，格式，时机等。 设备管理 相关文档 说明 采集设备配置上报 规定了SE3 AI迷你机向管理平台上报设备状态的过程及数据格式。内容包括：SE3 AI迷你机，连接的采集设备的状态。 采集设备状态上报 规定了SE3 AI迷你机想管理平台上报“配置采集设备”动作的过程及数据格式。内容包括：操作（增加/删除），采集设备类型，ID等。 系统管理 相关文档 说明 设备数据清理 规定了清空SE3 AI迷你机上数据的协议，包括清空用户，清空事件等消息 消息处理结果反馈 相关文档 说明 消息处理结果 SE3 AI迷你机向管理平台反馈消息处理结果。 状态码详细说明 状态码定义 协议的版本更新，请参考文档历史版本信息。 "},"zh/V2R2C01/api-lie-biao/1.-ji-yu-rabbit-mq-de-duan-yun-dui-jie-shuo-ming/2.-mq-jie-kou-liu-cheng-shuo-ming/2.1-jian-li-lian-jie.html":{"url":"zh/V2R2C01/api-lie-biao/1.-ji-yu-rabbit-mq-de-duan-yun-dui-jie-shuo-ming/2.-mq-jie-kou-liu-cheng-shuo-ming/2.1-jian-li-lian-jie.html","title":"1. 建立连接流程","keywords":"","body":"建立连接 本小结详细介绍了SE3 AI 迷你机如何和云平台建立通信连接具体流程。部署人员在SE3 AI 迷你机提供的配置页面中，完成“设备ID”，“云平台URL”等信息的配置后，SE3 AI 迷你机就会向云平台发出一个http请求，获取到MQ连接需要的一些基本参数信息。“设备ID”是有云平台提供的，用于认证接入设备。 "},"zh/V2R2C01/api-lie-biao/1.-ji-yu-rabbit-mq-de-duan-yun-dui-jie-shuo-ming/4.-guan-li-ping-tai-xi-tong-deng-lu-jie-kou.html":{"url":"zh/V2R2C01/api-lie-biao/1.-ji-yu-rabbit-mq-de-duan-yun-dui-jie-shuo-ming/4.-guan-li-ping-tai-xi-tong-deng-lu-jie-kou.html","title":"2. 登录接口","keywords":"","body":"管理平台系统登录接口 功能描述 通过http协议或者https协议向远程云平台请求登录，获取token, MQ服务器连接参数配置。具体是走http协议，还是走https协议，由用户在配置SE3 AI迷你机时指定的管理平台URL前缘决定。 请求地址 通过SE3 AI 迷你机上的界面进行登录URL的填写。 请求参数 参数 类型 默认值 选择 描述 举例 dev_sno string 无 必选 通过SE3 AI 迷你机配置界面上进行配置，在请求URL时携带 hex_mac string 无 必选 16进行mac地址字符串，上传到管理平台，告知管理平台dev_sno授权码被SE3 AI 迷你机占用 “0xe0a50900062b”，其中0x为16进制标志，后面为mac地址 示例： http://ip:port/login?dev_sno=xxxx 管理平台返回值： 请求成功： 一级参数 二级参数 三级参数 类型 选择 描述 token string 必选 请求云平台接口需要携带的参数 imgServerAddr string 可选 图片服务器URL，用于获取用户照片。如果下发得图片中是相对路径，则需要填写此地址。 recordAddr string 可选 管理平台URL列表，每个URL（可以为绝对地址，也可以相对地址）间以逗号分隔。 用于接收“人员通行记录”。 如： 示例1：\"/getRecord , /getRecord2\", 示例2：\"/getRecord , https://xxxx.com/getBackupRecord\" 示例3：\"http://xxx.com/getRecord, http://xxx.com/getBackupRecord\" recordUploadPeriod int 可选 通行记录周期上传时间，大于等于1秒，默认值为5秒 deviceInfoAddr string 可选 管理平台URL（相对地址），用于接收“设备添加事件”。如：/getDeviceInfo deviceMonitorAddr string 可选 管理平台URL (相对地址) ， 用于设置设备状态上报得周期，默认20秒 deviceMonitorPeriod int 可选 管理平台URL (相对地址) ， 用于设置设备状态上报得周期，默认20秒 rabbitmq dict 必选 MQ服务器配置参数集合 host string 必选 MQ服务器地址, 如 mq.xxx.com port int 必选 MQ服务器连接端口 login string 必选 MQ服务器登录用户名 password string 必选 MQ服务器连接密码 queue string 必选 MQ消息下发队列 vHost string 可选 MQ服务器登录用户名及下发队列所在虚拟主机.如果不指定，默认为\"/\"。 uploadVHost string 可选 MQ服务器上报队列所在虚拟主机。如果不指定，默认为\"/\"。 uploadQueue string 可选 MQ消息上传队列, 可以选择不通过MQ消息队列回传结果, 在uploadVHost虚拟主机下。默认是不支持MQ消息上传（即单向通信）。 fiqaDownQueue string 可选 人脸图片质量检测(FIQA)命令下发队列。 注意：当把SE3 AI迷你机用作图片质量校验服务器时，需要下发此栏位。否则不支持通过MQ命令进行FIQA校验功能。 fiqaUploadQueue string 可选 人脸图片质量检测(FIQA)命令结果上传队列。 注意：当把SE3 AI迷你机用作图片质量校验服务器时，需要下发此栏位。否则不支持通过MQ命令进行FIQA校验功能。 unNeedBindExchange bool 可选 消息队列是否需要绑定到交换机， 默认为false， 即需要绑定到消息队列。 exchange dict 必选 name string 必选 交换机名称 type string 必选 交换机类型 passive bool 必选 检查交换机是否存在，默认为false durable bool 必选 队列持久化标志，true为持久化队列 auto_delete bool 必选 自动删除 arguments dict 必选 扩展参数 ....... 自定义 可选 保留将来用于下发MQ服务器其它配置信息。 示例： { \"token\":\"xxxx\", \"rabbitmq\":{ \"host\":\"120.65.13.58\", \"port\":\"5672\", \"login\":\"admin\", \"password\":\"admin\", \"queue\":\"2806BF52CEDE407C8ABBA55CD35C8FEF\", \"exchange\":{ \"name\":\"exchangename1\", \"type\":\"topic\", \"passive\":false, \"durable\":true, \"auto_delete\":false, \"arguments\":null } } } 请求失败： 如果http返回状态码不为 200，则认为本次登录请求失败。 一级参数 二级参数 类型 描述 error code int 请求错误码 message string 错误描述 status string 错误类型 "},"zh/V2R2C01/api-lie-biao/1.-ji-yu-rabbit-mq-de-duan-yun-dui-jie-shuo-ming/2.-mq-jie-kou-liu-cheng-shuo-ming/2.2-yong-hu-guan-li.html":{"url":"zh/V2R2C01/api-lie-biao/1.-ji-yu-rabbit-mq-de-duan-yun-dui-jie-shuo-ming/2.-mq-jie-kou-liu-cheng-shuo-ming/2.2-yong-hu-guan-li.html","title":"1. 用户管理流程","keywords":"","body":"用户管理 用户管理是指从云平台同步人员信息到SE3 AI 迷你机并完成入库的过程。因为用户信息中图片信息比较大，故在用户管理MQ消息推荐只传递的用户ID，图片信息由单独的web接口获取。SE3 AI 迷你机根据消息中的用户ID和path中指定的URL（获取用户）从云服务器中同步用户信息。详细流程如下： "},"zh/V2R2C01/api-lie-biao/1.-ji-yu-rabbit-mq-de-duan-yun-dui-jie-shuo-ming/5.-mq-ming-ling-jie-kou-xiang-xi-shuo-ming/5.1-yong-hu-guan-li-mq-xiao-xi/5.1.1-tian-jia-huo-geng-xin-yong-hu-addusersplus.html":{"url":"zh/V2R2C01/api-lie-biao/1.-ji-yu-rabbit-mq-de-duan-yun-dui-jie-shuo-ming/5.-mq-ming-ling-jie-kou-xiang-xi-shuo-ming/5.1-yong-hu-guan-li-mq-xiao-xi/5.1.1-tian-jia-huo-geng-xin-yong-hu-addusersplus.html","title":"2. 添加或更新用户","keywords":"","body":"添加或更新用户（add_users_plus） 功能描述： 此命令用于管理平台向 SE3 AI 迷你机下发用户列表和用户详细信息请求URL。SE3 AI 迷你机的默认行为是创建并添加新用户，但如果用户ID已经存在，则会覆盖已有的用户信息。 为提升系统性能，管理平台一般只下发用户ID列表和获取用户详细信息的URL，SE3 AI 迷你机在收到用户列表后，会根据这两个字段组合出获取用户详细信息的实际URL。如何组合实际URL，请参见 URL组合章节。 一级参数 二级参数 类型 默认值 选择 说明 举例 method string 无 必选 add_users_plus “add_users_plus” messageId string 空 可选 MQ消息的唯一标识ID “004a5b58-32e8-487e-a90a-2ce443877e7e” userid_list list 无 必选，二选一 用户信息ID列表，管理平台需要保证用户ID唯一；默认行为是创建并添加新用户，但如果用户ID已经存在，则会覆盖已有的信息。 [\"user_id1\",\"user_id2\"] user_info_list list 无 必选，二选一 用户信息列表，不只下发ID信息，还有其他基础信息，下发基础信息和通过http协议得内容一致，字段定义详情请看人员下发信息接口。 extend_params dict 无 必选 扩展字段，可以为空 path string 空 可选 获取人员详细信息的URL： a. 绝对地址：必然加上协议，以http或者https开头 b. 相对地址：以\"/\"开始，加上接口名。如 /getUserInfo。 注意： 若人员信息通过user_info_list中下发，则此path无意义。 “http://ip:port/getPersonInfo” notify_path string 空 可选 管理平台URL（相对地址），用于通过http方式回传命令执行结果。相对地址的组合请参见 URL组合章节。注意： 如果登陆时管理平台下发 uploadQueue 字段，则会通过MQ上传通道返回结果。 如果没有 uploadQueue 字段，并且 notify_path 为非空，则会向 notify_path 返回结果 如果两个字段都没有，则不会返回结果（即单向通信）。 \"http://ip:port:/getResult\" MQ命令示例： 使用 user_list 的形式间接下发人员信息： // 如下是下发人员id列表的话，则人员的基础信息则通过path中的获取人员信息接口获取其他基础信息 { \"method\": \"add_users_plus\", // 此关键字和内容不能变 \"userid_list\": [\"user_id1\",\"user_id2\"]， // 人员id列表 \"extend_params\": // 扩展字段，当前为空。用于将来的接口升级。扩展字段的内容以字典的形式填充，但扩展字段本身为必选。 { \"path\": \"URL\"// 获取用户信息的接口的URL前缀 \"notify_path\": \"URL\" // 此处选择通过http协议返回mq命令处理结果的地址 } } 使用 user_info_list 的形式直接下发人员信息： { \"method\": \"add_users_plus\", // 此关键字和内容不能变 \"user_info_list\": // 人员数据列表 [ { \"info\": { \"name\":\"fubing\", //人员名称 \"type\":1 //人员类型 }, \"identity_id\":\"666\", //人员id \"reg_url\":\"http://xxxx.png\" //图片地址 }, { \"info\": { \"permission_ids\":[\"1046\"], //设备权限组列表 \"name\":\"wuyanzu\", //人员名称 \"type\":1 //人员类型 }, \"identity_id\":\"888\", //人员id \"reg_url\":\"http://xxxx.png\" //图片地址 }, ]， \"extend_params\": // 扩展字段，当前为空。用于将来的接口升级。扩展字段的内容以字典的形式填充，但扩展字段本身为必选。 { } } 返回结果示例： { \"success\":true， \"code\":0, \"message\":\"下发人员MQ命令执行成功\" \"dev_sno\":\"sda23erasd\" ,//设备唯一标识key \"messageKey\":\"add_users_plus\", //每一类消息格式的key \"result\":{ \"success_users\":[ {\"userid\":\"12365\", \"username\":\"小赵\",\"message\":\"人员下发成功\"，\"code\":0} ] ，//下发成功的人员 \"failed_users\":[ {\"userid\":\"12366\", \"username\":\"小王\",\"message\":\"无法检测到人脸\", \"code\":\"40094\"},//插入失败的人员 {\"userid\":\"12367\", \"username\":\"小明\",\"message\":\"无法检测到人脸, \"code\":\"40094\"} ] } "},"zh/V2R2C01/api-lie-biao/1.-ji-yu-rabbit-mq-de-duan-yun-dui-jie-shuo-ming/5.-mq-ming-ling-jie-kou-xiang-xi-shuo-ming/5.1-yong-hu-guan-li-mq-xiao-xi/5.1.2-shan-chu-yong-hu-deleteusers.html":{"url":"zh/V2R2C01/api-lie-biao/1.-ji-yu-rabbit-mq-de-duan-yun-dui-jie-shuo-ming/5.-mq-ming-ling-jie-kou-xiang-xi-shuo-ming/5.1-yong-hu-guan-li-mq-xiao-xi/5.1.2-shan-chu-yong-hu-deleteusers.html","title":"3. 删除用户","keywords":"","body":"删除用户（delete_users） 功能描述： 删除一个或多个用户。 如果删除列表中的某个用户ID不存在，则会跳过删除此用户，继续执行其它用户的删除。 参数描述（JSON格式）： 一级参数 二级参数 类型 默认值 选择 说明 举例 method string 无 必选 delete_users “delete_users” messageId string 空 可选 MQ消息的唯一标识ID “004a5b58-32e8-487e-a90a-2ce443877e7e” userid_list list 无 必选 用户id列表 [\"user_id1\",\"user_id2\"] extend_params dict 空 可选 扩展字段 notify_path string 无 必选 管理平台URL（相对地址），用于通过http方式回传命令执行结果。 相对地址的组合请参见 URL组合章节。注意： 如果登陆时管理平台下发 uploadQueue 字段，则会通过MQ上传通道返回结果。 如果没有 uploadQueue 字段，并且 notify_path 为非空，则会向 notify_path 返回结果如果两个字段都没有，则不会返回结果（即单向通信）。 \"http://ip:port:/getResult\" MQ命令示例： { \"method\": \"delete_users\", //此关键字和内容不能变 \"userid_list\": [\"user_id1\",\"user_id2\"]， //用户id列表 \"extend_params\": { \"notify_path\": \"URL\" // 返回mq命令处理结果的地址 } //扩展字段，里面内容可以为空，但字段为必选 } 返回结果示例： { \"success\":true， \"code\":0, \"message\":\"删除人员MQ命令执行成功\"， \"dev_sno\":\"dasdas23123\" ,//设备唯一标识key \"messageKey\":\"delete_users\" ,//每一类消息格式的key \"result\":{ \"success_users\":[ {\"userid\":\"12365\", \"message\":\"人员删除成功\",\"code\":0}， {\"userid\":\"12366\", \"message\":\"人员删除成功\",\"code\":0} ] ， \"failed_users\":[ {\"userid\":\"12367\", \"message\":\"人员删除失败\" , \"code\":40095} ] } } "},"zh/V2R2C01/api-lie-biao/1.-ji-yu-rabbit-mq-de-duan-yun-dui-jie-shuo-ming/5.-mq-ming-ling-jie-kou-xiang-xi-shuo-ming/5.3-ren-lian-tu-pian-zhi-liang-jian-ce-fiqamq-xiao-xi.html":{"url":"zh/V2R2C01/api-lie-biao/1.-ji-yu-rabbit-mq-de-duan-yun-dui-jie-shuo-ming/5.-mq-ming-ling-jie-kou-xiang-xi-shuo-ming/5.3-ren-lian-tu-pian-zhi-liang-jian-ce-fiqamq-xiao-xi.html","title":"4. 人脸图像检测","keywords":"","body":"人脸图片质量检测（FIQA）MQ消息 功能描述:用于对图片进行多维度的质量检测。 一级参数 二级参数 类型 默认值 选择 说明 举例 method string 无 必选 fiqa \"fiqa\" messageId string 无 可选 MQ消息的唯一标识ID “004a5b58-32e8-487e-a90a-2ce443877e7e” info dict 无 必选 包含图片数据 image_base64_str string 无 必选 图片base64转换格式 fiqa_level string 无 可选，可为空 质量检测级别，共high，custom, middle，low，no 5个级别，默认为high extend_params dict 无 必选 扩展字段，可以为空 notify_path string 无 可选 管理平台URL（相对地址），用于通过http方式回传命令执行结果。 相对地址的组合请参见 URL组合章节。 注意： 如果登陆时管理平台下发 uploadQueue 字段，则会通过MQ上传通道返回结果。 如果没有 uploadQueue 字段，并且 notify_path 为非空，则会向 notify_path 返回结果如果两个字段都没有，则不会返回结果（即单向通信）。 \"http://ip:port:/getResult\" MQ命令示例： { \"method\": \"fiqa\", // 此关键字和内容不能变 \"messageId\":\"adjfqk34j5l2h3loadshfl\", //MQ消息的唯一标识ID \"info\":{ \"image_base64_str\":\"xxxx\", //base64格式图片数据 \"fiqa_level\":\"high\" //质量检测级别，默认为high } \"extend_params\": { \"notify_path\": \"URL\" // 返回mq命令处理结果的地址 } // 扩展字段，当前为空。用于将来的接口升级。扩展字段的内容以字典的形式填充，但扩展字段本身为必选。 } 返回结果示例： { \"success\":true， \"code\":0, \"message\":\"检测图片质量MQ命令执行成功\", \"dev_sno\":\"sfgwe12341\" ,//设备唯一标识key \"messageKey\":\"fiqa\" ,//每一类消息格式的key \"messageId\":\"adjfqk34j5l2h3loadshfl\", //MQ消息的唯一标识ID \"result\":{ \"data\":[{ \"bbox\": [ 103, 78, 514, 609 ], \"fails\": [], \"fiqa_result\": true, \"info\": { \"brightness\": 0.9496459238842202, //明暗度 \"clarity\": 1.4716458509372252, //清晰度 \"face_size\": 354, //人脸大小 \"headpose\": { //人脸角度 \"pitch_angle\": 9.38, \"roll_angle\": -0.05, \"yaw_angle\": -1.63 }, \"mask\": 0.0036406677681952715, \"occlusion\": [ true, true, true ], \"partial\": false }, \"score\": 1.4716458509372252, \"success\": [ \"face_size\", \"headpose\", \"occlusion\", \"clarity\", \"mask\", \"partial\", \"brightness\" ]， } ] } } "},"zh/V2R2C01/api-lie-biao/1.-ji-yu-rabbit-mq-de-duan-yun-dui-jie-shuo-ming/7.-she-bei-shang-bao-xin-xi-de-jie-kou-gui-fan/":{"url":"zh/V2R2C01/api-lie-biao/1.-ji-yu-rabbit-mq-de-duan-yun-dui-jie-shuo-ming/7.-she-bei-shang-bao-xin-xi-de-jie-kou-gui-fan/","title":"3.2.3 事件管理","keywords":"","body":"设备上报信息的接口规范 SE3 AI 迷你机上每一次人员比对会产生一个比对事件，因为SE3 AI迷你机的存储空间有限。通常的架构设计是 SE3 AI 迷你机存储短期事件（默认1万条），并且把所有的事件上传到管理平台，由云平台做长期历史事件的存储及查询。 目前提供两种事件上报方式，分别适用于不同场景： index 上报方式 上报内容 实现机制 实时性 可靠性 适用场景 1 实时上报 只上报比对分数大于阈值的比对事件 比对完成，并且分数大于阈值即开始上报 高 低（不等待接收服务器的接收完成响应） 比对型，如人脸识别迎宾，闸机门禁开门控制等 2 历史事件上报 上报所有的事件 1 从历史事件数据库中查询未上传的事件进行批量上传； 2 上传完成后会记录当前游标，作为下次上传的起点； 3 上传的周期可配置的，默认为20s。周期可配置，需大于等于20s。 4 每次上传的事件数目不大于100条。 低 高（会重试上传） 记录型，如人脸识别考勤系统，客流统计系统等 "},"zh/V2R2C01/api-lie-biao/1.-ji-yu-rabbit-mq-de-duan-yun-dui-jie-shuo-ming/7.-she-bei-shang-bao-xin-xi-de-jie-kou-gui-fan/7.1-shi-shi-shi-jian-shang-bao-nei-rong.html":{"url":"zh/V2R2C01/api-lie-biao/1.-ji-yu-rabbit-mq-de-duan-yun-dui-jie-shuo-ming/7.-she-bei-shang-bao-xin-xi-de-jie-kou-gui-fan/7.1-shi-shi-shi-jian-shang-bao-nei-rong.html","title":"1. 实时事件上报","keywords":"","body":"实时事件上报内容 功能描述： SE3 AI 迷你机会实时上报比对分数大于阈值的比对事件到管理平台指定的URL，参见 管理平台登录接口定义。 调用URL 调用方法: POST 参数描述（JSON格式）： 一级参数 二级参数 类型 选择 说明 举例 identity_id string 必选 用户编号 \"12345565\" identity_name string 必选 用户名称 \"Tom\" group_name string 必选 比对的group name，如果没有group_name返回group_id \"default_group\" reg_pic base64 可选 注册的人脸底库，默认上传，可配置去除 \"/9j/6QAEAAD/2wBD...\" timestamp int32 必选 事件发生的时间戳 1565771454932 score float 必选 比对的分数 0.78 ext_data dict 必选 拓展数据字段，可迭代添加 device_ip sting 必选 设备ip \"192.168.1.101\" spot_pic base64 可选 现场照片，迎宾机模式下不传 \"/9j/6QAEAAD/2wBD...\" person_type int 必选 1：员工（默认为员工，包括这个字段不存在的情况）2：访客3：黑名单4：陌生人5：VIP 1 device_type string 必选 0：闸机 1：抓拍机 2：IPC 静态 3：IPC 动态 4：门禁 0 grab_fiqa_info dict 必选 返回抓拍机得人脸质量检测结果，详细参考历史信息详情示例 box_fiqa_info dict 必选 返回AI BOX得人脸质量检测结果，详细参考历史信息详情示例(臻识抓拍机有效) 可以使用小盒子附带的server来获取上传的事件。 假设小盒子的ip为：192.168.1.19，接收的resetful api为RealTimeEvent ，端口号为9528。 那webui或是配置/修改实时事件上报接收服务器地址为：http://192.168.1.19:9528/RealTimeEvent 启动server方法： $ sudo -i # cd /system/data/sophon_gate/script # python3 Event_Receive_server.py * Serving Flask app \"Event_Receive_server\" (lazy loading) * Environment: production WARNING: Do not use the development server in a production environment. Use a production WSGI server instead. * Debug mode: off * Running on http://0.0.0.0:9528/ (Press CTRL+C to quit) "},"zh/V2R2C01/api-lie-biao/2.sophon-ren-lian-shi-bie-wu-ji-suan-xi-tong-kai-fa-wen-dang/4-jie-kou-API-xiang-xi-shuo-ming/4.4-shi-jian-guan-li/9-yi-bu-shang-bao-shi-jian-ju-ti-nei-rong.html":{"url":"zh/V2R2C01/api-lie-biao/2.sophon-ren-lian-shi-bie-wu-ji-suan-xi-tong-kai-fa-wen-dang/4-jie-kou-API-xiang-xi-shuo-ming/4.4-shi-jian-guan-li/9-yi-bu-shang-bao-shi-jian-ju-ti-nei-rong.html","title":"2. 历史事件上报","keywords":"","body":"异步上报事件具体内容 功能描述 上报所有事件（数据库保存所有Event字段）给云平台。需要和监控服务器约定url，假设/EventServer/api/HistoryEvent 调用URL 调用方法: POST 参数描述（JSON格式）： index 一级参数 二级参数 类型 选择 说明 举例 1 identity_id string 必选 用户编号 \"13435454\" 2 identity_name string 必选 用户名称 \"Tom\" 3 group_name string 必选 比对的group name，如果没有group_name返回group_id \"default_group\" 4 reg_pic base64 可选 注册的人脸底库，可配置去除 5 timestamp int32 必选 事件发生的时间戳 1565771454932 6 score float 必选 比对的分数 0.23 7 ext_data dict 必选 拓展数据字段，可迭代添加 device_ip string 可选 设备ip \"192.168.1.101\" ep_id string 可选 边缘节点ID，是指SE3 AI迷你机连接的采集设备的ID。ID：dev_sno和IP的组合，用双下划线做连接。举例：AKOPKKKKK__192.168.1.25 \"3714be15-09b3-41ec-b9ce-62b668e5fa32__192.168.1.101\" spot_pic base64 可选 现场照片，可配置是否为大图 person_type int 可选 1:员工（默认为员工，包括这个字段不存在的情况）2: 访客3: 黑名单4：陌生人5：VIP 1 device_type string 可选 0：闸机，1：抓拍机 2：IPC 静态 3：IPC 动态 4：门禁 0 grab_fiqa_info dict 必选 其他设备模式内容为空（抓拍机模式下只有臻识抓拍机有效），返回抓拍机得人脸质量检测结果，详细请看示例 {} box_fiqa_info dict 必选 其他设备模式内容为空(抓拍机模式有值)，返回AI BOX得人脸质量检测结果，详细请看示例 {} dev_sno string 必选 SE3 AI迷你机唯一标识授权码 返回信息： { 'score': 0.16, 'reg_pic': '', 'group_name': 'default_group', 'identity_id': '13028', 'identity_name': 'stranger', 'timestamp': 1560408984678, 'ext_data': { 'device_type': '1', 'grab_fiqa_info': { //臻识抓拍机返回的信息 'confidence': 90, 'face_id': 1381, 'rect': {'top': 420, 'bottom': 524, 'right': 1734, 'left': 1652}, 'pitch': 0, 'age': 4, 'rel_rect': {'top': 62, 'bottom': 166, 'right': 134, 'left': 52}, 'yaw': 0, 'eye_dist': 82, 'roll': 0, 'sex': 1}, //性别0为男， 1为女 'spot_pic': 'xxxxx', 'box_fiqa_info': { //AI BOX端返回的图片质量检测信息 'age':4, 'sex':1, //性别0为男，1为女 'info': {'face_size': 255.0, 'clarity': 1.285613331998212, 'headpose': {'roll_angle': 10.107, 'pitch_angle': 14.413, 'yaw_angle': 7.326}, 'partial': False, 'brightness': 0.8362176798557405}, //图片质量检测的参数 'fiqa_result': True, //fiqa是否合格的标志，True表示图片质量比较好 'success': ['face_size', 'clarity', 'headpose', 'partial', 'brightness'], 'fails': []}, 'person_type': 1, //通过此处的人员类型来判断是否是陌生人，如果是person_type为4， 则是陌生人，且fiqa_result为False，则说明陌生人的图片质量不是很好，不能进行再次下发注册 'device_ip': '192.168.1.151'} } 示例： 可以使用小盒子附带的server来获取上传的事件。 假设小盒子的ip为：192.168.1.19，接收的resetful api为HistoryEvent ，端口号为9528。 那webui或是配置/修改历史事件上报接收服务器地址信息为：http://192.168.1.19:9528/HistoryEvent 启动server方法： $ sudo -i \\# cd /system/data/sophon_gate/script \\# python3 Event_Receive_server.py * Serving Flask app \"Event_Receive_server\" (lazy loading) * Environment: production WARNING: Do not use the development server in a production environment. Use a production WSGI server instead. * Debug mode: off * Running on http://0.0.0.0:9528/ (Press CTRL+C to quit) "},"zh/V2R2C01/api-lie-biao/1.-ji-yu-rabbit-mq-de-duan-yun-dui-jie-shuo-ming/7.-she-bei-shang-bao-xin-xi-de-jie-kou-gui-fan/7.2-she-bei-cao-zuo-shi-jian-shang-bao.html":{"url":"zh/V2R2C01/api-lie-biao/1.-ji-yu-rabbit-mq-de-duan-yun-dui-jie-shuo-ming/7.-she-bei-shang-bao-xin-xi-de-jie-kou-gui-fan/7.2-she-bei-cao-zuo-shi-jian-shang-bao.html","title":"1. 采集设备配置上报","keywords":"","body":"采集设备配置上报 请求参数 一级参数 二级参数 类型 选择 描述 actiontype int 必选 1-add 2-delete deviceInfo dict 必选 设备信息 epId string 必选 SN/小盒子标识 devSno string 必选 小盒子标识 direction int 必选 设备方向0-进 1-出 epType string 必选 0-闸机1-抓拍机2-IPC静态3-IPC动态4-门禁 memo string 必选 设备描述 epName string 必选 别名 epIp string 必选 设备ip epStatus string 必选 1-online,2-offline,3-unknown epVersion string 必选 软件版本 epGroupName string 必选 group名字 epStreamUrl string 必选 视频流地址 lastMonitorTime long 必选 最新上报时间(s) isMonitor bool 必选 是否监控 privilegeGroupKey string 必选 权限组key 返回参数： 参数 类型 选择 描述 status int 必选 返回状态码 message string 必选 返回提示message data null 必选 返回数据 请求示例: POST http://192.168.245.131:9092/brain/service/device/operate # example request { \"actionType\":1, \"deviceInfo\":{ \"epId\":\"iuqwefk12nad\", \"devSno\":\"do8123as09d\", \"type\":1 ... } } 请求成功： # response { \"status\":0, \"message\":\"成功\", \"data\":null } "},"zh/V2R2C01/api-lie-biao/2.sophon-ren-lian-shi-bie-wu-ji-suan-xi-tong-kai-fa-wen-dang/4-jie-kou-API-xiang-xi-shuo-ming/4.5-wu-duan-zhuan-tai-guan-li/3-zhu-dong-shang-bao-wu-duan-zhuan-tai.html":{"url":"zh/V2R2C01/api-lie-biao/2.sophon-ren-lian-shi-bie-wu-ji-suan-xi-tong-kai-fa-wen-dang/4-jie-kou-API-xiang-xi-shuo-ming/4.5-wu-duan-zhuan-tai-guan-li/3-zhu-dong-shang-bao-wu-duan-zhuan-tai.html","title":"2. 设备状态信息上报","keywords":"","body":"设备状态上报内容 功能描述 上报 SE3 AI迷你机状态和其连接的子节点设备给管理平台。 上报的URL是由管理下发，参见登录管理平台接口定义。 调用URL 调用方法: POST 参数描述（JSON格式）： 一级参数 二级参数 三级参数 类型 选择 描述 举例 gateway_ip string 必选 SE3 AI迷你机的 IP 地址 gateway_name string 必选 SE3 AI迷你机初始化时的主机名 gateway_status string 必选 SE3 AI迷你机状态 [online,offline] gateway_sn string 必选 SE3 AI迷你机硬件SN编码 \"SZCCKQRAIJBAH0002\" dev_sno string 必选 SE3 AI迷你机登录管理平台用的授权码（由管理平台生成） \"ZKZCPI000120190807142601\" gateway_ext_data dict 必选 额外信息字段 sw_version string 必选 中心节点版本信息 'build.date=2019年 08月 06日 星期二 17:42:49 CST\\nBUILD TIME: 20190806_173257\\nVERSION: V2R1C01\\n' sdk_version string 可选 算法版本 '1.1.56d1e91' gateway_mac string 可选 SE3 AI迷你机Mac地址 'e0:a5:09:00:0e:6d' cpu_usage float 可选 CPU使用率（百分比） 1.3 memory_size float 可选 内存大小，单位GB 1.55 memory_usage float 可选 内存使用率 0.87 disk_size float 可选 磁盘大小，单位GB(/data分区) 10.39 disk_free_size float 可选 磁盘数据分区剩余可用空间，单位为GB(/data分区) 9.39 sub_devices list 必选 设备信息列表 ep_id string 必选 边缘节点ID，是指SE3 AI迷你机连接的采集设备的ID。 ID：dev_sno和IP的组合，用双下划线做连接。举例：AKOPKKKKK__192.168.1.25 'ZKZCPI000120190807142601__192.168.1.101' ep_name string 可选 添加前端采集设备时设置的设备描述字符串 'aaa' ep_ip string 必选 边缘节点ip地址 '192.168.1.101' ep_status string 必选 边缘节点状态[online, offline] ep_location string 必选 边缘节点绑定的location '95274d2c-0941-4d96-b032-ab200f81362c' ep_type string 必选 0：闸机， 1：抓拍机 2：IPC 静态 3：IPC 动态 4：门禁 '1' ep_url string 可选 在视频流模式下有效，视频流url地址 'rtsp://192.168.1.101:554/ch2' 返回信息： { 'dev_sno': 'ZKZCPI000120190807142601', 'gateway_ext_data': {'sdk_version': '1.1.56d1e91', 'cpu_usage': 6.5, 'disk_free_size': 9.41, 'sw_version': 'build.date=2019年 08月 06日 星期二 17:42:49 CST\\nBUILD TIME: 20190806_173257\\nVERSION: V2R1C01\\n', 'memory_usage': 0.77, 'memory_size': 1.55, 'disk_size': 10.39, 'gateway_mac': 'e0:a5:09:00:0e:6d'}, 'gateway_sn': 'SZCCKQRAIJBAH0002', 'sub_devices': [{'ep_status': 'online', 'ep_location': '95274d2c-0941-4d96-b032-ab200f81362c', 'ep_url': 'rtsp://192.168.1.101:554/ch2', 'ep_type': '2', 'ep_name': '', 'ep_id': 'ZKZCPI000120190807142601__192.168.1.101', 'ep_ip': '192.168.1.101'}], 'gateway_name': 'bm1682landy93', 'gateway_status': 'online', 'gateway_ip': '192.168.1.251 ' } 示例： 可以使用小盒子附带的server来获取上传的事件。 假设小盒子的ip为：192.168.1.19，接收的resetful api为DeviceStatus，端口号为9528。 那webui或是配置/修改状态上报接收服务器地址填写的信息为：http://192.168.1.19:9528/DeviceStatus 启动server方法： $ sudo -i \\# cd /system/data/sophon_gate/script \\# python3 Event_Receive_server.py * Serving Flask app \"Event_Receive_server\" (lazy loading) * Environment: production WARNING: Do not use the development server in a production environment. Use a production WSGI server instead. * Debug mode: off * Running on http://0.0.0.0:9528/ (Press CTRL+C to quit) "},"zh/V2R2C01/api-lie-biao/1.-ji-yu-rabbit-mq-de-duan-yun-dui-jie-shuo-ming/5.-mq-ming-ling-jie-kou-xiang-xi-shuo-ming/5.2-she-bei-shu-ju-qing-li-mq-xiao-xi.html":{"url":"zh/V2R2C01/api-lie-biao/1.-ji-yu-rabbit-mq-de-duan-yun-dui-jie-shuo-ming/5.-mq-ming-ling-jie-kou-xiang-xi-shuo-ming/5.2-she-bei-shu-ju-qing-li-mq-xiao-xi.html","title":"1. 设备数据清理","keywords":"","body":"设备数据清理MQ消息 清除设备数据 功能描述：此命令对SE3 AI迷你机上的相关数据进行擦除。 一级参数 二级参数 类型 默认值 选择 说明 举例 method string 无 必选 wipe_data “wipe_data” messageId string 无 可选 MQ消息的唯一标识ID “004a5b58-32e8-487e-a90a-2ce443877e7e” wipe_options dict 无 必选 需要清除的数据选项 users bool 无 必选 是否删除人员底库信息true：删除false：不删除 false events bool 无 必选 是否删除人员识别记录事件true：删除false：不删除 false .......... 自定义 待选 保留将来使用 extend_params dict 无 必选 扩展字段，可以为空 notify_path string 无 可选 管理平台URL（相对地址），用于通过http方式回传命令执行结果。 相对地址的组合请参见 URL组合章节。注意： 如果登陆时管理平台下发 uploadQueue 字段，则会通过MQ上传通道返回结果。 如果没有 uploadQueue 字段，并且 notify_path 为非空，则会向 notify_path 返回结果如果两个字段都没有，则不会返回结果（即单向通信）。 \"http://ip:port:/getResult\" MQ命令示例： { \"method\": \"wipe_data\", // 此关键字和内容不能变 \"wipe_options\": { \"users\":true, //表示要删除用户数据 \"events\":false //表示不删除events数据 }， \"extend_params\": { \"notify_path\": \"URL\" // 返回mq命令处理结果的地址 } // 扩展字段，当前为空。用于将来的接口升级。扩展字段的内容以字典的形式填充，但扩展字段本身为必选。 } 返回结果示例： { \"success\":true， \"code\":0, \"message\":\"重置数据成功\", \"dev_sno\":\"adefs2341\" ,//设备唯一标识key \"messageKey\":\"wipe_data\" ,//每一类消息格式的key \"result\":{ \"wipe_options\": {\"users\":true, \"events\":false} //返回重置数据时mq下发的重置选项 } } "},"zh/V2R2C01/api-lie-biao/1.-ji-yu-rabbit-mq-de-duan-yun-dui-jie-shuo-ming/5.-mq-ming-ling-jie-kou-xiang-xi-shuo-ming/5.4-mq-zhi-hang-jie-guo-fan-hui-jie-kou.html":{"url":"zh/V2R2C01/api-lie-biao/1.-ji-yu-rabbit-mq-de-duan-yun-dui-jie-shuo-ming/5.-mq-ming-ling-jie-kou-xiang-xi-shuo-ming/5.4-mq-zhi-hang-jie-guo-fan-hui-jie-kou.html","title":"1. 消息处理结果反馈","keywords":"","body":"mq执行结果返回接口 功能描述:此处用于将mq执行结果返回给远程云服务器， 请求方式为POST。 一级参数 类型 默认值 选择 说明 举例 success bool 无 必选 布尔类型，返回成功显示true, 返回错误显示false true code int 无 必选 返回的结果类型码， 成功返回0 0 message string 无 必选 返回的结果信息，成功信息或者错误信息等 \"mq命令执行成功\" dev_sno string 无 必选 设备唯一标识授权码 “BIWPEZ000120190816123727” messageKey string 无 必选 返回得结果信息，告知服务器改mq消息是属于哪种命令返回得结果 “add_users_plus” messageId string 无 可选 告知服务器改mq消息是具体哪一条mq命令返回得结果，如果管理平台下发没有该信息，则不返回 result dict 无 必选 里面填写返回的结果 添加人员MQ命令返回示例： { \"code\": 0, \"success\": true, \"message\": \"下发人员MQ命令执行成功\", \"dev_sno\": \"BIWPEZ000120190816123727\", \"result\": { \"failed_users\": [], \"success_users\": [{\"userid\": \"01250083\", \"code\":0, \"message\": \"人员下发 成功\", \"username\": \"test12\"}, {\"userid\":\"01250070\", \"code\": 0, \"message\": \"人员下发成功\", \"username\":\"test3\"}] }, \"messageKey\": \"add_users_plus\" } "},"zh/V2R2C01/api-lie-biao/1.-ji-yu-rabbit-mq-de-duan-yun-dui-jie-shuo-ming/3.-zhuang-tai-ma-xiang-xi-shuo-ming.html":{"url":"zh/V2R2C01/api-lie-biao/1.-ji-yu-rabbit-mq-de-duan-yun-dui-jie-shuo-ming/3.-zhuang-tai-ma-xiang-xi-shuo-ming.html","title":"2. 状态码详细说明","keywords":"","body":"状态码详细说明 状态码定义 状态码 状态码含义 说明 0 SUCCESS 成功执行命令 40071 PARAM_ERROR 调用MQ命令参数错误 50072 SERVER_PROCESS_FAILED 系统错误 50073 REMOTE_SERVER_FAILED 获取远程服务器下发数据失败 50074 REMOTE_DATA_FAILED 远程服务器下发数据内容错误 40091 PARAM_ERROR 调用fog命令接口参数错误 40491 NOT_FOUND 没有找到需求资源 41591 CONTENT_TYPE_ERROR 请求类型错误 40000 BAD_REQUEST 请求失败 40001 UNSUPPORT_CONTENT_TYPE 请求类型错误 40002 EMPTY_REQUEST_JSON 请求参数为空 40003 IMAGE_ERROR 请求图片异常 40004 NO_FACE 没有人脸 40005 BOOLEAN_ARGUMENT_ERROR Bool类型出错 40006 LOW_QUALITY_ERROR 图片低质量 40007 IMAGE_SIZE_TOO_LARGE_ERROR 图片size太大 40008 EMPTY_GROUP_ERROR 比对分组为空 40009 ENROLL_FACE_SIZE_NOT_ENOUGH_ERROR 人脸大小不足 40010 BAD_FEATURE_ERROR 人脸特征值异常 40011 IDENTITY_EXSIT_ERROR 用户已存在 40012 GROUP_NAME_ERROR 人脸底库名称错误，比如人脸底库名称重复，人脸底库名称为空等 40013 GROUP_NOT_LOAD 人脸底库未加载 40014 STRANGER_NOT_DELETE 陌生人无法正常删除 40015 GROUP_LEN_ERROR 人脸底库长度错误 40400 NOT_FOUND 没有找到需求资源 40401 ID_NOT_FOUND ID没有找到 41300 PAYLOAD_TOO_LARGE 请求负载太大 50100 NOT_IMPLEMENTED 功能未实现 "},"zh/V2R2C01/api-lie-biao/1.-ji-yu-rabbit-mq-de-duan-yun-dui-jie-shuo-ming/":{"url":"zh/V2R2C01/api-lie-biao/1.-ji-yu-rabbit-mq-de-duan-yun-dui-jie-shuo-ming/","title":"历史版本信息","keywords":"","body":"SE3盒子迷你机管理协议 1.版本说明 Index 版本 更新说明 其他 1 1.0.0 1，初始化版本 2 1.0.1 1，新增2.1 登录接口， 返回token， mq服务器配置等信息2, 修改“2.2 获取人员信息的接口”的方法：由GET改成POST，以便支持一次请求获取多个用户信息3, 去掉单纯的云服务器界面上的配置，改为增加登录地址填写，事件上传和状态上传沿用之前SE3 AI 迷你机已有接口4, 请求云平台获取信息的接口携带token验证和dev_sno授权 3 1.0.2 1、去掉MQ用户组管理相关调用，在下发用户时候默认创建比对组，且下发用户信息去掉必选字段group_name，且添加用户得mq方法改为add_users_plus 4 1.0.3 1 完善系统架构设计框架图；2 完善了接口流程说明 5 1.0.4 1、增加了下发人员返回执行结果的接口返回 6 1.0.5 1、定义 3.3 mq命令执行结果返回形式，返回地址再每个mq命令中添加。2、每个mq命令增加notify_path, 该地址用来返回每个mq命令需要返回结果的地址。 7 1.0.6 1、云服务器地址配置，cloud_server_address 2、下发人员基础信息可兼容直接在mq中下发 3、下发得人员图片路径可以是绝对和相对路径 4、历史考勤记录里上传得内容增加grab_fiqa_info（臻识抓拍机有添加），以及AI BOX盒子进行得人脸图片检测信息box_fiqa_info 5、针对可能会通过上传的陌生人图片进行重新入库，下发人员信息里增加字段register_type来判断是否是陌生人入库 8 1.0.7 1、增加mq下发的时候，可以选填messageKey， 用来作为消息的id标识，该字段允许缺失， 并在通过mq消息队列返回结果的方式中，增加messageKey和dev_sno字段 2、增加FIQA图片质量检测MQ命令 3、登录接口增加uploadQueue, vHost, uploadVHost, unNeedbindExchange, imgServerAddress等字段 9 1.0.8 1、通行记录中增加字段dev_sno， 即SE3 AI迷你机唯一授权标识码 2、fiqa返回得数据格式变更，结果result字段内容和http请求得fiqa返回结果一致 3、添加登录时候附带SE3 AI迷你机的mac地址，告知管理平台dev_sno已被哪台SE3 AI迷你机占用 "}}