# 1.7.1 实时事件上报内容

**功能描述：**

SE3 AI 迷你机会实时上报比对分数大于阈值的比对事件到管理平台指定的URL，参见 管理平台登录接口定义。

**调用URL**

调用方法: POST

**参数描述（JSON格式）：**

\*\*\*\*

| 一级参数 | 二级参数 | 类型 | 选择 | 说明 |
| :--- | :--- | :--- | :--- | :--- |


| identity\_id |  | string | 必选 | 用户编号 |
| :--- | :--- | :--- | :--- | :--- |


| identity\_name |  | string | 必选 | 用户名称 |
| :--- | :--- | :--- | :--- | :--- |


| group\_name |  | string | 必选 | 比对的group name，如果没有group\_name返回group\_id |
| :--- | :--- | :--- | :--- | :--- |


| reg\_pic |  | base64 | 可选 | 注册的人脸底库，默认上传，可配置去除 |
| :--- | :--- | :--- | :--- | :--- |


| timestamp |  | int32 | 必选 | 事件发生的时间戳 |
| :--- | :--- | :--- | :--- | :--- |


| score |  | float | 必选 | 比对的分数 |
| :--- | :--- | :--- | :--- | :--- |


| ext\_data |  | dict | 必选 | 拓展数据字段，可迭代添加 |
| :--- | :--- | :--- | :--- | :--- |


|  | device\_ip | string | 可选 | 设备ip |
| :--- | :--- | :--- | :--- | :--- |


<table>
  <thead>
    <tr>
      <th style="text-align:left"></th>
      <th style="text-align:left">ep_id</th>
      <th style="text-align:left">sting</th>
      <th style="text-align:left">&#x53EF;&#x9009;</th>
      <th style="text-align:left">
        <p>&#x8FB9;&#x7F18;&#x8282;&#x70B9;ID&#xFF0C;&#x662F;&#x6307;SE3 AI&#x8FF7;&#x4F60;&#x673A;&#x8FDE;&#x63A5;&#x7684;&#x91C7;&#x96C6;&#x8BBE;&#x5907;&#x7684;ID&#x3002;</p>
        <p>ID&#xFF1A;dev_sno&#x548C;IP&#x7684;&#x7EC4;&#x5408;&#xFF0C;&#x7528;&#x53CC;&#x4E0B;&#x5212;&#x7EBF;&#x505A;&#x8FDE;&#x63A5;&#x3002;&#x4E3E;&#x4F8B;&#xFF1A;AKOPKKKKK__192.168.1.25</p>
      </th>
    </tr>
  </thead>
  <tbody></tbody>
</table><table>
  <thead>
    <tr>
      <th style="text-align:left"></th>
      <th style="text-align:left">person_type</th>
      <th style="text-align:left">int</th>
      <th style="text-align:left">&#x53EF;&#x9009;</th>
      <th style="text-align:left">
        <p>1&#xFF1A;&#x5458;&#x5DE5;&#xFF08;&#x9ED8;&#x8BA4;&#x4E3A;&#x5458;&#x5DE5;&#xFF0C;&#x5305;&#x62EC;&#x8FD9;&#x4E2A;&#x5B57;&#x6BB5;&#x4E0D;&#x5B58;&#x5728;&#x7684;&#x60C5;&#x51B5;&#xFF09;</p>
        <p>2&#xFF1A;&#x8BBF;&#x5BA2;</p>
        <p>3&#xFF1A;&#x9ED1;&#x540D;&#x5355;</p>
        <p>4&#xFF1A;&#x964C;&#x751F;&#x4EBA;</p>
        <p>5&#xFF1A;VIP</p>
      </th>
    </tr>
  </thead>
  <tbody></tbody>
</table><table>
  <thead>
    <tr>
      <th style="text-align:left"></th>
      <th style="text-align:left">device_type</th>
      <th style="text-align:left">string</th>
      <th style="text-align:left">&#x53EF;&#x9009;</th>
      <th style="text-align:left">
        <p>0&#xFF1A;&#x95F8;&#x673A;&#xFF0C;</p>
        <p>1&#xFF1A;&#x6293;&#x62CD;&#x673A;</p>
        <p>2&#xFF1A;IPC &#x9759;&#x6001;</p>
        <p>3&#xFF1A;IPC &#x52A8;&#x6001;</p>
        <p>4&#xFF1A;&#x95E8;&#x7981;</p>
      </th>
    </tr>
  </thead>
  <tbody></tbody>
</table>**示例：**

可以使用小盒子附带的server来获取上传的事件。

假设小盒子的ip为：192.168.1.19，接收的resetful api为RealTimeEvent ，端口号为9528。

那webui或是配置/修改实时事件上报接收服务器地址为：[http://192.168.1.19:9528/RealTimeEvent](http://192.168.1.19:9528/RealTimeEvent)

启动server方法：

```text
$ sudo -i
# cd /system/data/sophon_gate/script
# python3 Event_Receive_server.py

* Serving Flask app "Event_Receive_server" (lazy loading)
* Environment: production
WARNING: Do not use the development server in a production environment.
Use a production WSGI server instead.
* Debug mode: off
* Running on http://0.0.0.0:9528/ (Press CTRL+C to quit)
```

